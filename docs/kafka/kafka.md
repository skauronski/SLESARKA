# Топики и их потребители/продюсеры

## Таблица 1: Топики и приложения

| Топик         | Приложение-продюсер         | Задержка отправки данных (мс) | Идемпотентность (да, нет) | Ожидание подтверждения отправки (0, 1, all) | Приложение-потребитель               | Назначение                                                                 |
|---------------|-----------------------------|-------------------------------|---------------------------|---------------------------------------------|---------------------------------------|----------------------------------------------------------------------------|
| orders        | orders-service-producer     | 0 мс                          | да                        | all                                         | delivery-service-consumer             | Сервис доставки обрабатывает заказы и обновляет их статус.                 |
|               |                             |                               |                           |                                             | inventory-service-consumer            | Обрабатывает сообщения о заказах: уменьшает/увеличивает количество товаров.|
|               |                             |                               |                           |                                             | analytics-service-consumer            | Собирает данные о заказе для аналитики и отчетности.                       |
| notifications | orders-service-producer     | 0 мс                          | да                        | all                                         | email-notification-service-consumer   | Отправляет уведомления пользователям через email.                          |
|               |                             |                               |                           |                                             | sms-notification-service-consumer     | Отправляет уведомления пользователям через SMS.                            |
|               |                             |                               |                           |                                             | push-notification-service-consumer    | Отправляет уведомления пользователям через push.                           |

---

## Таблица 2: Параметры топиков

| Топик         | Количество разделов (партиций) | Фактор репликации | Максимальный объем хранимых данных до удаления (Мбайты) | Максимальный размер сообщений (Мбайты) | Время хранения данных до удаления (часы) | Ключ партиционирования          |
|---------------|--------------------------------|-------------------|---------------------------------------------------------|-----------------------------------------|------------------------------------------|---------------------------------|
| orders        | 3                              | 3                 | 100                                                     | 1                                       | 6                                        | key = msg["topic"]              |
| notifications | 3                              | 3                 | 100                                                     | 1                                       | 6                                        | key = msg["topic"]              |

---

## Схема сообщения и примеры

### Схема сообщения для топика `orders`
```json
{
  "order_id": "12345",
  "customer_id": "67890",
  "status": "created",
  "items": [
    {
      "product_id": "98765",
      "quantity": 2,
      "price": 100.0
    }
  ],
  "timestamp": "2023-10-01T12:00:00Z"
}
